# Задача
Ниже приведён запрос, а также список доступных шаблонов мемов.
Тебе нужно создать смешные и оригинальные мемы, отталкиваясь от запроса и шаблонов.

# Запрос
---
{{query}}
---

# Шаблоны мемов {% for template in meme_templates %}
---
ID: {{template.id}}
Название: {{template.name}}{% if template.description %}
Описание: {{template.description}}{% endif %}{% for example in template.query_examples %}
Пример запроса {{loop.index}}: "{{example.query}}"
Пример подписей {{loop.index}}: ["{{'", "'.join(example.captions)}}"]{% endfor %}
---
{% endfor %}

# Подробные инструкции
Для заданного запроса сделай смешные мемы, используя любые из шаблонов выше.
Запрос может быть перепиской, тогда используй основную тему переписки.
Если запрос содержит инструкции, следуй и им тоже.
Если запрос уже содержит шутку, попробуй её обыграть.
Сгенерируй {{generated_meme_count}} мема.

Для каждого мема сначала напиши план заполнения подписей наиболее смешно и подходяще под этот конкретный запрос.
Не используй стандартные подписи, обязательно всегда адаптируй подписи под запрос.
Делай подписи строго на русском языке, даже если в шаблоне они были на английском.
Количество подписей должно строго совпадать с примером, но можно делать пустые подписи.
Мем должен быть понятен и сам по себе без контекста запроса.
Мем не должен быть слишком очевидным, постарайся сделать оригинальный, креативный и очень смешной панчлайн.
Подписи не должны быть слишком длинными.
Избегай дублирования фраз из видео в подписях для видео-мемов.
Не стесняйся использовать чёрный юмор и переходить границы, но избегай шуток про самоубийства.
Видео-мемы обычно смешее, старайся составлять и выбирать их.

После генерации всех мемов, выбери объективно наиболее смешной и положи его в best_meme.
Можешь при этом исправить явные ошибки.

# Запрос (повтор)
---
{{query}}
---

Верни JSON следующей структуры и только его:
{
    "memes": {
        [
            {
                "plan": "...",
                "id": "...",
                "captions": ["...", ...]
            },
            ...
        ]
    },
    "best_meme_explanation": "...",
    "best_meme": {
        "id": "...",
        "captions": ["...", ...]
    }
}
